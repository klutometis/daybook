<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Online depth-first-search</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Online depth-first-search"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-02-27"/>
<meta name="author" content="Peter Danenberg"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style><link rel="stylesheet" type="text/css"/ href="daybook.css"><link href='http://fonts.googleapis.com/css?family=Cardo' rel='stylesheet' type='text/css'>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">Online depth-first-search</h1>


<p>
See <a href="http://youtu.be/g6X05sODSQ8">online depth-first search</a> in action:
</p>


<div align="center"><iframe align="center" width="560" height="315" src="http://www.youtube.com/embed/g6X05sODSQ8" frameborder="0" allowfullscreen></iframe></div>

<p>
<a href="http://aima.cs.berkeley.edu/">AIMA</a> 4.12 plops an agent down (at an unknown location) into a world
full of disjoint, convex polygons. The goal is to find the goal; after
which, the agent is teleported to a random location. 1 point is
deducted for every unit travelled; 1000 points rewarded every time
the goal is reached.
</p>
<p>
Wash, rinse, repeat.
</p>
<p>
It turns out that a randomly walking agent doesn’t fare horribly on a
world with 50 vertices over 1000 tics; such an agent can expect to
score around 2500 points.
</p>
<p>
An online depth-first-search agent, on the other hand—which is
basically stochastic but also exhaustive—will score about 3600 points.
There are some subtleties of book-keeping involved in creating an
online agent, however.
</p>
<p>
For one, we can’t merely pop a node off of the frontier when it turns
out to be fruitless: we have to physically maneuver backwards. To
that end, we’ll keep track of the unbacktracked nodes.
</p>
<p>
The horizon is a little weird, too: instead of being a universal
stack which is pushed to and popped from, the online horizon is
node-specific: every node will have a stack of untried nodes which
will be popped during traversal.
</p>
<p>
The partially observable aspect leads to some interesting problems,
too: one is the reconciliation of relative and absolute coördinate
systems. When teleported to a new and unknown location, there is no
choice but to designate that location origin; and construct an
absolute map by the relative distances from that origin.
</p>
<p>
Things become problematic after teleporting to a subsequent unknown
location: one assigns it origin and proceeds building a map relatively
piecewise. At some point, though, chances are that the agent will
encounter a previously encountered node (\(s\)) with some previously
assigned absolute coördinate.
</p>
<p>
At that point, a delta (\(\delta\)) is computed between \(s\) and \(s'\);
and \(\delta\) is propagated to the nodes calibrated by the other
origin. In other words, one group of nodes calibrated by an origin is
recalibrated by the other and thereby normalized.
</p>
<p>
This can be achieved by assigning a time stamp to every calculated
coördinate, and recalibrating every old coördinate:
</p>



<pre class="src src-scheme">(hash-table-walk coordinates
  (<span style="color: #00cdcd; font-weight: bold;">lambda</span> (state old-coordinate)
    (when (&lt; (coordinate-time old-coordinate) time)
      (coordinate-time-set! old-coordinate time)
      (<span style="color: #00cdcd; font-weight: bold;">let</span> ((old-point (coordinate-point old-coordinate)))
        (coordinate-point-set!
         old-coordinate
         (make-point (- (point-x old-point) delta-x)
                     (- (point-y old-point) delta-y)))))))
</pre>


<p>
It’s apparent when recalibration is required, since paths will cross
(see <a href="#before-recalibration">figure 1</a>); during animation, the recalibration is jarring (see
<a href="#after-calibration">figure 2</a>).
</p>

<div id="before-recalibration" class="figure">
<p><img src="./before-calibration-small.png"  alt="./before-calibration-small.png" /></p>
<p>Graph with divergent origins before recalibration (<a href="before-calibration.png">high-res</a>)</p>
</div>


<div id="after-calibration" class="figure">
<p><img src="./after-calibration-small.png"  alt="./after-calibration-small.png" /></p>
<p>Graph with a normalized origin after recalibration (<a href="after-calibration.png">high-res</a>)</p>
</div>


<div id="outline-container-1" class="outline-3">
<h3 id="sec-1"><span class="todo TODO">TODO</span></h3>
<div class="outline-text-3" id="text-1">

<ul>
<li>I’d like to see some graphs to corroborate those numbers
     (distribution graphs: sorted, superimposed).
</li>
<li>Also superimposed: one run with score per minute, 
     showing the lead-up time for depth-first vs. random walk.
</li>
</ul>

</div>
</div>
</div>

</body>
</html>
